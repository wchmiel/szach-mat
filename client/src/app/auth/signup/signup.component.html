<br>
<br>
<div class="row justify-content-md-center">
    <div class="col-lg-4 col-md-6 sz-form-wrap">
      <!-- <form (ngSubmit)="onSignup(f)" #f="ngForm"> -->
      <form [formGroup]="signupForm">
        <div class="form-group">
          <label for="nick" class="h5">Nick:</label>
          <input type="text" class="form-control" id="nick" #nickInput formControlName="nick" (focus)="onInputFocus($event)" ngModel>
          <!-- message for empty nick -->
          <p class="form-text sz-invalid-form-text" *ngIf="!signupForm.get('nick').valid && signupForm.get('nick').touched">
            This field is required.
          </p>

          <!-- message for nick uniqueness from the server -->
          <p class="form-text sz-invalid-form-text" *ngIf="serverErrMess !== null && serverErrMess.error_type === 'nick'">
            {{ serverErrMess.error_mess }}
          </p>
        </div>
        <div class="form-group">
          <label for="email" class="h5">Email:</label>
          <input type="email" class="form-control" id="email" #emailInput formControlName="email" (focus)="onInputFocus($event)" ngModel>
          <p class="form-text sz-invalid-form-text" *ngIf="!signupForm.get('email').valid && signupForm.get('email').touched">
            <!-- message for empty email -->
            <span *ngIf="signupForm.get('email').errors['required']">
              This field is required.
            </span>

            <!-- message for invalid email -->
            <span *ngIf="signupForm.get('email').errors['email'] && signupForm.get('email').value">
              Must use a valid email.
            </span>
          </p>

          <!-- message for email uniqueness from the server -->
          <p class="form-text sz-invalid-form-text" *ngIf="serverErrMess !== null && serverErrMess.error_type === 'email'">
            {{ serverErrMess.error_mess }}
          </p>
        </div>
        <div formGroupName="passFields" id="sz-pass-fields">
          <div class="form-group">
            <label for="password" class="h5">Password:</label>
            <input type="password" class="form-control" id="password" formControlName="password" ngModel>
            <p class="form-text sz-invalid-form-text" *ngIf="!signupForm.get('passFields.password').valid && signupForm.get('passFields.password').touched">
              <!-- message for empty password -->
              <span *ngIf="signupForm.get('passFields.password').errors['required']">
                This field is required.
              </span>

              <!-- message for too short password -->
              <span *ngIf="signupForm.get('passFields.password').errors['passwordLength']">
                Password must be at least 6 characters.
              </span>
            </p>
          </div>
          <div class="form-group">
            <label for="conf_password" class="h5">Confirm Password:</label>
            <input type="password" class="form-control" id="conf_password" formControlName="conf_password" ngModel>
            <p class="form-text sz-invalid-form-text" *ngIf="signupForm.get('passFields.conf_password').touched && signupForm.get('passFields').errors !== null">
              <!-- message for empty password -->
              <span *ngIf="!signupForm.get('passFields.conf_password').valid && signupForm.get('passFields.conf_password').errors['required']">
                This field is required.
              </span>

              <!-- message for mismatch passwords -->
              <span *ngIf="signupForm.get('passFields.conf_password').value && signupForm.get('passFields').errors['passwordMismatch']">
                Passwords must match.
              </span>
            </p>
          </div>
        </div>
        <button (click)="onSubmit()" #btnSubmitForm type="submit" class="btn btn-success" [disabled]="!signupForm.valid">
          Sign Up
          <span class="sz-btn-spinner"></span>
        </button>
      </form>
    </div>
</div>
